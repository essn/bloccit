<h1><%= markdown @topic.name %></h1>

<div class="row">
  <div class="col-md-8">
    <p class="lead"><%= markdown @topic.description %>

    <%= render @posts %>
  </div>

  <% if policy(@topic).update? %>
    <div class="col-md-1">
      <% if policy(Post.new).create? %>
        <%= link_to "New Post", new_topic_post_path(@topic), class: 'btn btn-success' %>
      <% end %>
    </div>

    <div class="col-md-1">
      <%= link_to "Edit Topic", edit_topic_path, class: 'btn btn-success' %>
    </div>

    <div class="col-md-1">
      <% if policy(@topic).destroy? %>
        <%= link_to "Delete Topic", @topic, method: :delete, class: 'btn btn-danger', data: { confirm: 'Are you sure you want to delete this topic?' } %> 
     <% end %>
    </div>

  <% else %>
    <div class="col-md-4">
      <% if policy(Post.new).create? %>
        <%= link_to "New Post", new_topic_post_path(@topic), class: 'btn btn-success' %>
      <% end %>
    </div>

  <% end %>
</div>



